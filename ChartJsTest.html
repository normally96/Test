<!doctype html>
<html>

<head>
	<title>Line Chart</title>
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
	<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.7.2/Chart.bundle.min.js"></script>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.0.4/socket.io.js"></script>
	<style>
	canvas{
		-moz-user-select: none;
		-webkit-user-select: none;
		-ms-user-select: none;
	}
	</style>
</head>

<body>
	<button id="chartemit" type="button" class="btn btn-danger">Update chart</button>
	<div style="width:75%;">
		<canvas id="myChart"></canvas>
	</div>
	<br>
	<br>
	<script>
		var socket = io();
      		 $("#chartemit").click(function(){            
          	 socket.emit('chartemit','');   
          	         
      	 });

      	socket.on('updateChartJs', (msg)=>{	
       		var newLocations = msg;
       		console.log(msg);
       		//addData(window.myLineChart,["hieu","hiehihi","haha"], [12,13,14]);  
       		initChart("myChart", ["hieu"], msg);
       	});

      	function addData(chart, label, data) {
  			chart.data.labels.push(label);
			chart.data.datasets.forEach((dataset) => {
    		dataset.data.push(data);
  			});
  		  	chart.update();
		}
		function initChart(elementID, labels, data) {
			var ctx = document.getElementById(elementID);
			window.myLineChart = new Chart(ctx, {
	  			type: 'line',
	  		  	data: {
		       		labels: data,
		      		datasets: [{
		         		label: '# of Votes',
		          		data: data,
		           		backgroundColor: [
		                 	'rgba(0, 255, 0, 0.3)'
		            	],
		            	borderColor: [
		                	'rgba(255,99,132,1)'
		            	],
		           		borderWidth: 1
		        	}]
	   			},
	  		  	options: {
		       		scales: {
		  		  		yAxes: [{
		       				ticks: {
		          				beginAtZero:true
		       			 	}
		   			 	}]
	       			}
	    		}
			});

		}

      	
	</script>
</body>

</html>
